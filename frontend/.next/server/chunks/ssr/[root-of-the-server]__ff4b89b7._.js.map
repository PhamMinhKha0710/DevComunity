{"version":3,"sources":["../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../frontend/src/app/saved/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport type { SavedItem } from '@/types';\r\nimport apiClient from '@/api/client';\r\n\r\n// Strip HTML helper\r\nconst stripHtml = (html: string): string => {\r\n    if (!html) return '';\r\n    return html.replace(/<[^>]*>/g, '').substring(0, 150);\r\n};\r\n\r\nexport default function SavedItemsPage() {\r\n    const { user, isLoading: authLoading } = useAuth();\r\n    const router = useRouter();\r\n    const [savedItems, setSavedItems] = useState<SavedItem[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [filter, setFilter] = useState<'all' | 'questions' | 'answers'>('all');\r\n\r\n    useEffect(() => {\r\n        if (!authLoading && !user) {\r\n            router.push('/login');\r\n        } else if (user) {\r\n            fetchSavedItems();\r\n        }\r\n    }, [user, authLoading, router]);\r\n\r\n    const fetchSavedItems = async () => {\r\n        try {\r\n            const response = await apiClient.get<{ items: SavedItem[] }>('/saved');\r\n            setSavedItems(response.data.items || []);\r\n        } catch (error) {\r\n            console.error('Failed to fetch saved items:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const removeSavedItem = async (id: number) => {\r\n        try {\r\n            await apiClient.delete(`/saved/${id}`);\r\n            setSavedItems(prev => prev.filter(item => item.savedItemId !== id));\r\n        } catch (error) {\r\n            console.error('Failed to remove saved item:', error);\r\n        }\r\n    };\r\n\r\n    const filteredItems = savedItems.filter(item => {\r\n        if (filter === 'all') return true;\r\n        if (filter === 'questions') return item.targetType === 'Question';\r\n        if (filter === 'answers') return item.targetType === 'Answer';\r\n        return true;\r\n    });\r\n\r\n    if (authLoading || isLoading) {\r\n        return (\r\n            <div className=\"container py-5 text-center\">\r\n                <div className=\"spinner-border text-primary\" role=\"status\">\r\n                    <span className=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!user) return null;\r\n\r\n    return (\r\n        <div className=\"container py-4\">\r\n            {/* Header */}\r\n            <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                <div>\r\n                    <h1 className=\"fw-bold mb-1\">\r\n                        <i className=\"bi bi-bookmark me-2\"></i>Saved Items\r\n                    </h1>\r\n                    <p className=\"text-muted mb-0\">{savedItems.length} items saved</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div className=\"card border-0 shadow-sm rounded-4 mb-4\">\r\n                <div className=\"card-body p-3\">\r\n                    <div className=\"d-flex gap-2\">\r\n                        <button\r\n                            className={`btn btn-sm rounded-pill ${filter === 'all' ? 'btn-primary' : 'btn-outline-secondary'}`}\r\n                            onClick={() => setFilter('all')}\r\n                        >\r\n                            All ({savedItems.length})\r\n                        </button>\r\n                        <button\r\n                            className={`btn btn-sm rounded-pill ${filter === 'questions' ? 'btn-primary' : 'btn-outline-secondary'}`}\r\n                            onClick={() => setFilter('questions')}\r\n                        >\r\n                            <i className=\"bi bi-question-circle me-1\"></i>\r\n                            Questions ({savedItems.filter(i => i.targetType === 'Question').length})\r\n                        </button>\r\n                        <button\r\n                            className={`btn btn-sm rounded-pill ${filter === 'answers' ? 'btn-primary' : 'btn-outline-secondary'}`}\r\n                            onClick={() => setFilter('answers')}\r\n                        >\r\n                            <i className=\"bi bi-chat-left-text me-1\"></i>\r\n                            Answers ({savedItems.filter(i => i.targetType === 'Answer').length})\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Saved Items List */}\r\n            <div className=\"card border-0 shadow-sm rounded-4\">\r\n                {filteredItems.length > 0 ? (\r\n                    <div className=\"list-group list-group-flush\">\r\n                        {filteredItems.map((item) => (\r\n                            <div key={item.savedItemId} className=\"list-group-item p-4 border-0 border-bottom\">\r\n                                <div className=\"row align-items-center\">\r\n                                    <div className=\"col-auto\">\r\n                                        <div className={`rounded-3 p-2 ${item.targetType === 'Question' ? 'bg-primary-subtle' : 'bg-success-subtle'}`}>\r\n                                            <i className={`bi ${item.targetType === 'Question' ? 'bi-question-circle text-primary' : 'bi-chat-left-text text-success'} fs-5`}></i>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col\">\r\n                                        <span className=\"badge bg-light text-dark mb-2\">{item.targetType}</span>\r\n                                        <h6 className=\"mb-1 fw-bold\">\r\n                                            {item.targetType === 'Question' && item.question ? (\r\n                                                <Link href={`/questions/${item.question.questionId}`} className=\"text-decoration-none text-dark\">\r\n                                                    {item.question.title}\r\n                                                </Link>\r\n                                            ) : item.targetType === 'Answer' && item.answer ? (\r\n                                                <Link href={`/questions/${item.answer.questionId}#answer-${item.answer.answerId}`} className=\"text-decoration-none text-dark\">\r\n                                                    Answer to question\r\n                                                </Link>\r\n                                            ) : (\r\n                                                <span>Saved item</span>\r\n                                            )}\r\n                                        </h6>\r\n                                        <p className=\"text-muted small mb-0\">\r\n                                            {item.targetType === 'Question' && item.question\r\n                                                ? stripHtml(item.question.body) + '...'\r\n                                                : item.targetType === 'Answer' && item.answer\r\n                                                    ? stripHtml(item.answer.body) + '...'\r\n                                                    : ''\r\n                                            }\r\n                                        </p>\r\n                                        <small className=\"text-muted\">\r\n                                            Saved on {new Date(item.createdDate).toLocaleDateString()}\r\n                                        </small>\r\n                                    </div>\r\n                                    <div className=\"col-auto\">\r\n                                        <button\r\n                                            className=\"btn btn-sm btn-outline-danger rounded-pill\"\r\n                                            onClick={() => removeSavedItem(item.savedItemId)}\r\n                                        >\r\n                                            <i className=\"bi bi-bookmark-x me-1\"></i>Remove\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"card-body text-center py-5\">\r\n                        <i className=\"bi bi-bookmark fs-1 text-muted mb-3\"></i>\r\n                        <h5>No saved items</h5>\r\n                        <p className=\"text-muted mb-4\">\r\n                            Save questions and answers to read later\r\n                        </p>\r\n                        <Link href=\"/questions\" className=\"btn btn-primary rounded-pill\">\r\n                            Browse Questions\r\n                        </Link>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1]}