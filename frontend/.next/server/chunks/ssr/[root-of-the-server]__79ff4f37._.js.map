{"version":3,"sources":["../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../frontend/src/app/questions/%5Bid%5D/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport apiClient from '@/api/client';\r\nimport type { Question, Answer } from '@/types';\r\n\r\nexport default function QuestionDetailPage() {\r\n    const { id } = useParams();\r\n    const { user } = useAuth();\r\n    const [question, setQuestion] = useState<Question | null>(null);\r\n    const [answers, setAnswers] = useState<Answer[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [newAnswer, setNewAnswer] = useState('');\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetchQuestion();\r\n    }, [id]);\r\n\r\n    const fetchQuestion = async () => {\r\n        try {\r\n            const [questionRes, answersRes] = await Promise.all([\r\n                apiClient.get<Question>(`/questions/${id}`),\r\n                apiClient.get<Answer[]>(`/questions/${id}/answers`),\r\n            ]);\r\n            setQuestion(questionRes.data);\r\n            setAnswers(answersRes.data || []);\r\n        } catch (error) {\r\n            console.error('Failed to fetch question:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleVote = async (type: 'up' | 'down', targetType: 'question' | 'answer', targetId: number) => {\r\n        if (!user) return;\r\n        try {\r\n            await apiClient.post(`/votes`, {\r\n                targetType,\r\n                targetId,\r\n                isUpvote: type === 'up',\r\n            });\r\n            fetchQuestion();\r\n        } catch (error) {\r\n            console.error('Vote failed:', error);\r\n        }\r\n    };\r\n\r\n    const handleSubmitAnswer = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!newAnswer.trim() || !user) return;\r\n\r\n        setIsSubmitting(true);\r\n        try {\r\n            await apiClient.post(`/answers`, {\r\n                questionId: Number(id),\r\n                body: newAnswer,\r\n            });\r\n            setNewAnswer('');\r\n            fetchQuestion();\r\n        } catch (error) {\r\n            console.error('Failed to submit answer:', error);\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!question) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Question not found</h2>\r\n                    <Link href=\"/\" className=\"mt-4 inline-block text-orange-500 hover:text-orange-600\">\r\n                        ← Back to home\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50\">\r\n            <header className=\"bg-white shadow-sm border-b\">\r\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\r\n                    <Link href=\"/\" className=\"text-2xl font-bold text-orange-500\">\r\n                        DevComunity\r\n                    </Link>\r\n                </div>\r\n            </header>\r\n\r\n            <main className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n                {/* Question */}\r\n                <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n                    <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">{question.title}</h1>\r\n\r\n                    <div className=\"flex gap-6\">\r\n                        {/* Voting */}\r\n                        <div className=\"flex flex-col items-center gap-2\">\r\n                            <button\r\n                                onClick={() => handleVote('up', 'question', question.questionId)}\r\n                                className={`p-2 rounded hover:bg-gray-100 ${question.userVoteType === 'up' ? 'text-orange-500' : 'text-gray-400'}`}\r\n                            >\r\n                                ▲\r\n                            </button>\r\n                            <span className=\"text-xl font-semibold\">{question.score}</span>\r\n                            <button\r\n                                onClick={() => handleVote('down', 'question', question.questionId)}\r\n                                className={`p-2 rounded hover:bg-gray-100 ${question.userVoteType === 'down' ? 'text-orange-500' : 'text-gray-400'}`}\r\n                            >\r\n                                ▼\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Content */}\r\n                        <div className=\"flex-1\">\r\n                            <div className=\"prose max-w-none\" dangerouslySetInnerHTML={{ __html: question.body }} />\r\n\r\n                            <div className=\"mt-6 flex gap-2 flex-wrap\">\r\n                                {question.tags?.map((tag) => (\r\n                                    <span key={tag.tagId} className=\"bg-blue-50 text-blue-600 px-2 py-1 rounded text-sm\">\r\n                                        {tag.tagName}\r\n                                    </span>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <div className=\"mt-4 text-sm text-gray-500\">\r\n                                asked by <span className=\"text-blue-600\">{question.authorUsername}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Answers */}\r\n                <div className=\"mb-6\">\r\n                    <h2 className=\"text-xl font-bold text-gray-900 mb-4\">{answers.length} Answers</h2>\r\n\r\n                    {answers.map((answer) => (\r\n                        <div key={answer.answerId} className={`bg-white rounded-lg shadow p-6 mb-4 ${answer.isAccepted ? 'border-l-4 border-green-500' : ''}`}>\r\n                            <div className=\"flex gap-6\">\r\n                                <div className=\"flex flex-col items-center gap-2\">\r\n                                    <button\r\n                                        onClick={() => handleVote('up', 'answer', answer.answerId)}\r\n                                        className={`p-2 rounded hover:bg-gray-100 ${answer.userVoteType === 'up' ? 'text-orange-500' : 'text-gray-400'}`}\r\n                                    >\r\n                                        ▲\r\n                                    </button>\r\n                                    <span className=\"text-xl font-semibold\">{answer.score}</span>\r\n                                    <button\r\n                                        onClick={() => handleVote('down', 'answer', answer.answerId)}\r\n                                        className={`p-2 rounded hover:bg-gray-100 ${answer.userVoteType === 'down' ? 'text-orange-500' : 'text-gray-400'}`}\r\n                                    >\r\n                                        ▼\r\n                                    </button>\r\n                                    {answer.isAccepted && (\r\n                                        <span className=\"text-green-500 text-2xl\">✓</span>\r\n                                    )}\r\n                                </div>\r\n\r\n                                <div className=\"flex-1\">\r\n                                    <div className=\"prose max-w-none\" dangerouslySetInnerHTML={{ __html: answer.body }} />\r\n                                    <div className=\"mt-4 text-sm text-gray-500\">\r\n                                        answered by <span className=\"text-blue-600\">{answer.authorUsername}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Add Answer Form */}\r\n                {user ? (\r\n                    <div className=\"bg-white rounded-lg shadow p-6\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Your Answer</h3>\r\n                        <form onSubmit={handleSubmitAnswer}>\r\n                            <textarea\r\n                                value={newAnswer}\r\n                                onChange={(e) => setNewAnswer(e.target.value)}\r\n                                rows={8}\r\n                                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500\"\r\n                                placeholder=\"Write your answer here...\"\r\n                                required\r\n                            />\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={isSubmitting}\r\n                                className=\"mt-4 bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 transition\"\r\n                            >\r\n                                {isSubmitting ? 'Posting...' : 'Post Your Answer'}\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"bg-white rounded-lg shadow p-6 text-center\">\r\n                        <p className=\"text-gray-600\">\r\n                            <Link href=\"/login\" className=\"text-orange-500 hover:text-orange-600\">Log in</Link> to post an answer\r\n                        </p>\r\n                    </div>\r\n                )}\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1]}