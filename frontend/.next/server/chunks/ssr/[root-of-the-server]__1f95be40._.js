module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},3420,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.HooksClientContext},98823,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.ServerInsertedHtml},23530,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(40947),f=a.i(45523);function g(){let{user:a,isLoading:g}=(0,e.useAuth)(),h=(0,d.useRouter)(),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)("watched");(0,c.useEffect)(()=>{g||a?a&&u():h.push("/login")},[a,g,h]);let u=async()=>{try{let[a,b]=await Promise.all([f.default.get("/tags?pageSize=100"),f.default.get("/users/tag-preferences")]);j(a.data.items||[]),l(b.data.watched||[]),n(b.data.ignored||[])}catch(a){console.error("Failed to fetch tag preferences:",a),j([{tagId:1,tagName:"javascript",usageCount:1500},{tagId:2,tagName:"react",usageCount:1200},{tagId:3,tagName:"typescript",usageCount:800},{tagId:4,tagName:"node.js",usageCount:700},{tagId:5,tagName:"python",usageCount:600},{tagId:6,tagName:"csharp",usageCount:500},{tagId:7,tagName:"html",usageCount:450},{tagId:8,tagName:"css",usageCount:400}])}finally{p(!1)}},v=(a,b)=>{"watched"===b?k.includes(a)?l(k.filter(b=>b!==a)):(l([...k,a]),n(m.filter(b=>b!==a))):m.includes(a)?n(m.filter(b=>b!==a)):(n([...m,a]),l(k.filter(b=>b!==a)))},w=async()=>{try{await f.default.put("/users/tag-preferences",{watched:k,ignored:m})}catch(a){console.error("Failed to save preferences:",a)}},x=i.filter(a=>a.tagName.toLowerCase().includes(q.toLowerCase()));return g||o?(0,b.jsx)("div",{className:"container py-5 text-center",children:(0,b.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):a?(0,b.jsx)("div",{className:"container py-4",children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsxs)("div",{className:"col-lg-8",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("h1",{className:"fw-bold mb-2",children:[(0,b.jsx)("i",{className:"bi bi-tags-fill me-2 text-primary"}),"Tag Preferences"]}),(0,b.jsx)("p",{className:"text-muted",children:"Customize your feed by watching tags you're interested in or ignoring tags you don't want to see."})]}),(0,b.jsxs)("ul",{className:"nav nav-tabs mb-4",children:[(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsxs)("button",{className:`nav-link ${"watched"===s?"active":""}`,onClick:()=>t("watched"),children:[(0,b.jsx)("i",{className:"bi bi-eye me-1 text-success"}),"Watched Tags (",k.length,")"]})}),(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsxs)("button",{className:`nav-link ${"ignored"===s?"active":""}`,onClick:()=>t("ignored"),children:[(0,b.jsx)("i",{className:"bi bi-eye-slash me-1 text-danger"}),"Ignored Tags (",m.length,")"]})})]}),(0,b.jsx)("div",{className:"card border-0 shadow-sm rounded-4 mb-4",children:(0,b.jsx)("div",{className:"card-body",children:"watched"===s?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"alert alert-success d-flex align-items-start mb-4",children:[(0,b.jsx)("i",{className:"bi bi-info-circle-fill me-2 mt-1"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Watched Tags"}),(0,b.jsx)("p",{className:"mb-0 small",children:"Questions with these tags will be highlighted in your feed and you'll receive notifications for new questions."})]})]}),k.length>0?(0,b.jsx)("div",{className:"d-flex flex-wrap gap-2 mb-4",children:k.map(a=>(0,b.jsxs)("span",{className:"badge bg-success-subtle text-success d-flex align-items-center gap-1 px-3 py-2 rounded-pill",children:[(0,b.jsx)("i",{className:"bi bi-eye"}),a,(0,b.jsx)("button",{className:"btn-close btn-close-white ms-1",style:{fontSize:"0.5rem"},onClick:()=>v(a,"watched")})]},a))}):(0,b.jsx)("p",{className:"text-muted text-center py-3",children:"No watched tags yet. Add tags below to watch them."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"alert alert-danger d-flex align-items-start mb-4",children:[(0,b.jsx)("i",{className:"bi bi-info-circle-fill me-2 mt-1"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Ignored Tags"}),(0,b.jsx)("p",{className:"mb-0 small",children:"Questions with these tags will be hidden from your feed."})]})]}),m.length>0?(0,b.jsx)("div",{className:"d-flex flex-wrap gap-2 mb-4",children:m.map(a=>(0,b.jsxs)("span",{className:"badge bg-danger-subtle text-danger d-flex align-items-center gap-1 px-3 py-2 rounded-pill",children:[(0,b.jsx)("i",{className:"bi bi-eye-slash"}),a,(0,b.jsx)("button",{className:"btn-close btn-close-white ms-1",style:{fontSize:"0.5rem"},onClick:()=>v(a,"ignored")})]},a))}):(0,b.jsx)("p",{className:"text-muted text-center py-3",children:"No ignored tags. Add tags below to ignore them."})]})})}),(0,b.jsxs)("div",{className:"card border-0 shadow-sm rounded-4",children:[(0,b.jsx)("div",{className:"card-header bg-white border-0 pt-4",children:(0,b.jsx)("h5",{className:"fw-bold mb-0",children:"Add Tags"})}),(0,b.jsxs)("div",{className:"card-body",children:[(0,b.jsxs)("div",{className:"input-group mb-4",children:[(0,b.jsx)("span",{className:"input-group-text bg-light border-end-0",children:(0,b.jsx)("i",{className:"bi bi-search"})}),(0,b.jsx)("input",{type:"text",className:"form-control border-start-0",placeholder:"Search tags...",value:q,onChange:a=>r(a.target.value)})]}),(0,b.jsx)("div",{className:"row g-2",children:x.map(a=>(0,b.jsx)("div",{className:"col-md-6 col-lg-4",children:(0,b.jsxs)("div",{className:"d-flex align-items-center justify-content-between p-2 border rounded-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"badge bg-primary-subtle text-primary me-2",children:a.tagName}),(0,b.jsxs)("small",{className:"text-muted",children:["Ã—",a.usageCount]})]}),(0,b.jsxs)("div",{className:"btn-group btn-group-sm",children:[(0,b.jsx)("button",{className:`btn ${k.includes(a.tagName)?"btn-success":"btn-outline-success"}`,onClick:()=>v(a.tagName,"watched"),title:"Watch",children:(0,b.jsx)("i",{className:"bi bi-eye"})}),(0,b.jsx)("button",{className:`btn ${m.includes(a.tagName)?"btn-danger":"btn-outline-danger"}`,onClick:()=>v(a.tagName,"ignored"),title:"Ignore",children:(0,b.jsx)("i",{className:"bi bi-eye-slash"})})]})]})},a.tagId))})]})]}),(0,b.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,b.jsxs)("button",{className:"btn btn-primary rounded-pill px-4",onClick:w,children:[(0,b.jsx)("i",{className:"bi bi-check-lg me-2"}),"Save Preferences"]})})]}),(0,b.jsx)("div",{className:"col-lg-4",children:(0,b.jsxs)("div",{className:"card border-0 shadow-sm rounded-4",children:[(0,b.jsx)("div",{className:"card-header bg-white border-0 pt-4",children:(0,b.jsxs)("h5",{className:"fw-bold mb-0",children:[(0,b.jsx)("i",{className:"bi bi-lightbulb me-2 text-warning"}),"Tips"]})}),(0,b.jsx)("div",{className:"card-body",children:(0,b.jsxs)("ul",{className:"list-unstyled mb-0",children:[(0,b.jsxs)("li",{className:"mb-3 d-flex",children:[(0,b.jsx)("i",{className:"bi bi-check-circle-fill text-success me-2 mt-1"}),(0,b.jsx)("span",{className:"small",children:"Watch tags you want to follow closely"})]}),(0,b.jsxs)("li",{className:"mb-3 d-flex",children:[(0,b.jsx)("i",{className:"bi bi-check-circle-fill text-success me-2 mt-1"}),(0,b.jsx)("span",{className:"small",children:"Ignore tags for topics you're not interested in"})]}),(0,b.jsxs)("li",{className:"mb-3 d-flex",children:[(0,b.jsx)("i",{className:"bi bi-check-circle-fill text-success me-2 mt-1"}),(0,b.jsx)("span",{className:"small",children:"Your preferences affect your homepage feed"})]}),(0,b.jsxs)("li",{className:"d-flex",children:[(0,b.jsx)("i",{className:"bi bi-info-circle-fill text-primary me-2 mt-1"}),(0,b.jsx)("span",{className:"small",children:"You can always change these later"})]})]})})]})})]})}):null}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__1f95be40._.js.map