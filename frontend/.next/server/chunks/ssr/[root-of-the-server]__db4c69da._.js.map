{"version":3,"sources":["../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../frontend/src/app/repositories/%5Bid%5D/files/%5B%5B...path%5D%5D/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { useParams } from 'next/navigation';\r\nimport type { RepositoryFile } from '@/types';\r\nimport apiClient from '@/api/client';\r\n\r\nexport default function FileViewPage() {\r\n    const params = useParams();\r\n    const id = params.id as string;\r\n    const pathSegments = params.path as string[] || [];\r\n    const filePath = pathSegments.join('/');\r\n\r\n    const [content, setContent] = useState<string>('');\r\n    const [fileInfo, setFileInfo] = useState<RepositoryFile | null>(null);\r\n    const [files, setFiles] = useState<RepositoryFile[]>([]);\r\n    const [isDirectory, setIsDirectory] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchContent();\r\n    }, [id, filePath]);\r\n\r\n    const fetchContent = async () => {\r\n        try {\r\n            // First try to get as file content\r\n            const response = await apiClient.get<{ content?: string; files?: RepositoryFile[] }>(\r\n                `/repositories/${id}/files/content?path=${encodeURIComponent(filePath)}`\r\n            );\r\n\r\n            if (response.data.files) {\r\n                // It's a directory\r\n                setIsDirectory(true);\r\n                setFiles(response.data.files);\r\n            } else {\r\n                // It's a file\r\n                setIsDirectory(false);\r\n                setContent(response.data.content || '');\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to fetch content:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const getFileIcon = (file: RepositoryFile) => {\r\n        if (file.type === 'dir') return 'bi-folder-fill text-warning';\r\n        const ext = file.name.split('.').pop()?.toLowerCase();\r\n        switch (ext) {\r\n            case 'js':\r\n            case 'jsx':\r\n            case 'ts':\r\n            case 'tsx': return 'bi-file-earmark-code text-info';\r\n            case 'json': return 'bi-file-earmark-code text-warning';\r\n            case 'md': return 'bi-markdown text-primary';\r\n            case 'css':\r\n            case 'scss': return 'bi-filetype-css';\r\n            case 'html': return 'bi-filetype-html text-danger';\r\n            default: return 'bi-file-earmark text-muted';\r\n        }\r\n    };\r\n\r\n    const getLanguage = (filename: string) => {\r\n        const ext = filename.split('.').pop()?.toLowerCase();\r\n        switch (ext) {\r\n            case 'js':\r\n            case 'jsx': return 'javascript';\r\n            case 'ts':\r\n            case 'tsx': return 'typescript';\r\n            case 'json': return 'json';\r\n            case 'css': return 'css';\r\n            case 'html': return 'html';\r\n            case 'md': return 'markdown';\r\n            case 'py': return 'python';\r\n            case 'cs': return 'csharp';\r\n            default: return 'plaintext';\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"container py-5 text-center\">\r\n                <div className=\"spinner-border text-primary\" role=\"status\">\r\n                    <span className=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Build breadcrumb parts\r\n    const breadcrumbParts = filePath.split('/').filter(Boolean);\r\n\r\n    return (\r\n        <div className=\"container py-4\">\r\n            {/* Breadcrumb */}\r\n            <nav aria-label=\"breadcrumb\" className=\"mb-4\">\r\n                <ol className=\"breadcrumb\">\r\n                    <li className=\"breadcrumb-item\"><Link href=\"/repositories\">Repositories</Link></li>\r\n                    <li className=\"breadcrumb-item\"><Link href={`/repositories/${id}`}>Repository</Link></li>\r\n                    {breadcrumbParts.map((part, index) => {\r\n                        const partPath = breadcrumbParts.slice(0, index + 1).join('/');\r\n                        const isLast = index === breadcrumbParts.length - 1;\r\n                        return isLast ? (\r\n                            <li key={part} className=\"breadcrumb-item active\">{part}</li>\r\n                        ) : (\r\n                            <li key={part} className=\"breadcrumb-item\">\r\n                                <Link href={`/repositories/${id}/files/${partPath}`}>{part}</Link>\r\n                            </li>\r\n                        );\r\n                    })}\r\n                </ol>\r\n            </nav>\r\n\r\n            {isDirectory ? (\r\n                // Directory listing\r\n                <div className=\"card border-0 shadow-sm rounded-4\">\r\n                    <div className=\"card-header bg-white\">\r\n                        <i className=\"bi bi-folder-fill text-warning me-2\"></i>\r\n                        {filePath || 'Root'}\r\n                    </div>\r\n                    <div className=\"list-group list-group-flush\">\r\n                        {pathSegments.length > 0 && (\r\n                            <Link\r\n                                href={`/repositories/${id}/files/${breadcrumbParts.slice(0, -1).join('/')}`}\r\n                                className=\"list-group-item list-group-item-action d-flex align-items-center py-2\"\r\n                            >\r\n                                <i className=\"bi bi-arrow-90deg-up me-3 text-muted\"></i>\r\n                                <span>..</span>\r\n                            </Link>\r\n                        )}\r\n                        {files.sort((a, b) => {\r\n                            if (a.type === 'dir' && b.type !== 'dir') return -1;\r\n                            if (a.type !== 'dir' && b.type === 'dir') return 1;\r\n                            return a.name.localeCompare(b.name);\r\n                        }).map((file) => (\r\n                            <Link\r\n                                key={file.path}\r\n                                href={`/repositories/${id}/files/${file.path}`}\r\n                                className=\"list-group-item list-group-item-action d-flex align-items-center py-2\"\r\n                            >\r\n                                <i className={`bi ${getFileIcon(file)} me-3`}></i>\r\n                                <span>{file.name}</span>\r\n                            </Link>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                // File content\r\n                <div className=\"card border-0 shadow-sm rounded-4\">\r\n                    <div className=\"card-header bg-white d-flex justify-content-between align-items-center\">\r\n                        <div>\r\n                            <i className=\"bi bi-file-earmark-code me-2\"></i>\r\n                            {pathSegments[pathSegments.length - 1] || 'File'}\r\n                        </div>\r\n                        <div className=\"d-flex gap-2\">\r\n                            <button className=\"btn btn-sm btn-outline-secondary rounded-pill\">\r\n                                <i className=\"bi bi-pencil me-1\"></i>Edit\r\n                            </button>\r\n                            <button className=\"btn btn-sm btn-outline-secondary rounded-pill\">\r\n                                <i className=\"bi bi-download me-1\"></i>Download\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"card-body p-0\">\r\n                        <pre className=\"m-0 p-4 bg-light\" style={{ maxHeight: '600px', overflow: 'auto' }}>\r\n                            <code>{content}</code>\r\n                        </pre>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1]}