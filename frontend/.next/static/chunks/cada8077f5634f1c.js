(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96086,(e,s,a)=>{s.exports=e.r(9187)},92519,e=>{"use strict";var s=e.i(48277),a=e.i(30668),i=e.i(96086),r=e.i(16506),l=e.i(23959),t=e.i(96800);function c(){let{user:e,isLoading:c}=(0,l.useAuth)(),n=(0,i.useRouter)(),[d,o]=(0,a.useState)(!1),[m,h]=(0,a.useState)(""),[x,p]=(0,a.useState)({name:"",description:"",isPrivate:!1});if(c)return(0,s.jsx)("div",{className:"container py-5 text-center",children:(0,s.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})});if(!e)return n.push("/login"),null;let u=async e=>{e.preventDefault(),o(!0),h("");try{let e=await t.default.post("/repositories",x);n.push(`/repositories/${e.data.repositoryId}`)}catch(e){h(e.response?.data?.message||"Failed to create repository")}finally{o(!1)}};return(0,s.jsx)("div",{className:"container py-4",children:(0,s.jsx)("div",{className:"row justify-content-center",children:(0,s.jsxs)("div",{className:"col-lg-8",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("nav",{"aria-label":"breadcrumb",children:(0,s.jsxs)("ol",{className:"breadcrumb",children:[(0,s.jsx)("li",{className:"breadcrumb-item",children:(0,s.jsx)(r.default,{href:"/repositories",children:"Repositories"})}),(0,s.jsx)("li",{className:"breadcrumb-item active",children:"Create New"})]})}),(0,s.jsxs)("h1",{className:"fw-bold",children:[(0,s.jsx)("i",{className:"bi bi-plus-circle me-2"}),"Create a new repository"]}),(0,s.jsx)("p",{className:"text-muted",children:"A repository contains all project files, including the revision history."})]}),(0,s.jsx)("div",{className:"card border-0 shadow-sm rounded-4",children:(0,s.jsxs)("div",{className:"card-body p-4",children:[m&&(0,s.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,s.jsx)("i",{className:"bi bi-exclamation-circle me-2"}),m]}),(0,s.jsxs)("form",{onSubmit:u,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Owner / Repository name *"}),(0,s.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,s.jsxs)("div",{className:"d-flex align-items-center bg-light rounded-pill px-3 py-2",children:[(0,s.jsx)("img",{src:e.profilePicture||"/images/default-avatar.png",className:"rounded-circle me-2",width:"24",height:"24",alt:""}),(0,s.jsx)("span",{children:e.username})]}),(0,s.jsx)("span",{className:"text-muted",children:"/"}),(0,s.jsx)("input",{type:"text",className:"form-control",placeholder:"repository-name",value:x.name,onChange:e=>p({...x,name:e.target.value.toLowerCase().replace(/\s+/g,"-")}),required:!0,pattern:"[a-z0-9-]+"})]}),(0,s.jsx)("small",{className:"text-muted",children:"Great repository names are short and memorable."})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Description (optional)"}),(0,s.jsx)("textarea",{className:"form-control",rows:3,placeholder:"A short description of what this repository is about...",value:x.description,onChange:e=>p({...x,description:e.target.value})})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Visibility"}),(0,s.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,s.jsxs)("div",{className:"form-check p-3 border rounded-3",children:[(0,s.jsx)("input",{className:"form-check-input",type:"radio",name:"visibility",id:"public",checked:!x.isPrivate,onChange:()=>p({...x,isPrivate:!1})}),(0,s.jsx)("label",{className:"form-check-label w-100",htmlFor:"public",children:(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[(0,s.jsx)("i",{className:"bi bi-unlock fs-4 me-3 text-success"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Public"}),(0,s.jsx)("p",{className:"text-muted mb-0 small",children:"Anyone on the internet can see this repository."})]})]})})]}),(0,s.jsxs)("div",{className:"form-check p-3 border rounded-3",children:[(0,s.jsx)("input",{className:"form-check-input",type:"radio",name:"visibility",id:"private",checked:x.isPrivate,onChange:()=>p({...x,isPrivate:!0})}),(0,s.jsx)("label",{className:"form-check-label w-100",htmlFor:"private",children:(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[(0,s.jsx)("i",{className:"bi bi-lock fs-4 me-3 text-warning"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Private"}),(0,s.jsx)("p",{className:"text-muted mb-0 small",children:"You choose who can see and commit to this repository."})]})]})})]})]})]}),(0,s.jsx)("hr",{className:"my-4"}),(0,s.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,s.jsx)(r.default,{href:"/repositories",className:"btn btn-outline-secondary rounded-pill",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary rounded-pill px-4",disabled:d||!x.name,children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Creating..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"bi bi-plus-circle me-2"}),"Create repository"]})})]})]})]})})]})})})}e.s(["default",()=>c])}]);