(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96086,(e,s,t)=>{s.exports=e.r(9187)},72303,e=>{"use strict";var s=e.i(48277),t=e.i(30668),a=e.i(96086),r=e.i(16506),l=e.i(23959),n=e.i(96800);function o(){let{id:e}=(0,a.useParams)(),{user:o}=(0,l.useAuth)(),[d,i]=(0,t.useState)(null),[c,x]=(0,t.useState)([]),[m,u]=(0,t.useState)(!0),[h,g]=(0,t.useState)(""),[p,b]=(0,t.useState)(!1);(0,t.useEffect)(()=>{f()},[e]);let f=async()=>{try{let[s,t]=await Promise.all([n.default.get(`/questions/${e}`),n.default.get(`/questions/${e}/answers`)]);i(s.data),x(t.data||[])}catch(e){console.error("Failed to fetch question:",e)}finally{u(!1)}},j=async(e,s,t)=>{if(o)try{await n.default.post("/votes",{targetType:s,targetId:t,isUpvote:"up"===e}),f()}catch(e){console.error("Vote failed:",e)}},y=async s=>{if(s.preventDefault(),h.trim()&&o){b(!0);try{await n.default.post("/answers",{questionId:Number(e),body:h}),g(""),f()}catch(e){console.error("Failed to submit answer:",e)}finally{b(!1)}}};return m?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):d?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,s.jsx)(r.default,{href:"/",className:"text-2xl font-bold text-orange-500",children:"DevComunity"})})}),(0,s.jsxs)("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:d.title}),(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>j("up","question",d.questionId),className:`p-2 rounded hover:bg-gray-100 ${"up"===d.userVoteType?"text-orange-500":"text-gray-400"}`,children:"▲"}),(0,s.jsx)("span",{className:"text-xl font-semibold",children:d.score}),(0,s.jsx)("button",{onClick:()=>j("down","question",d.questionId),className:`p-2 rounded hover:bg-gray-100 ${"down"===d.userVoteType?"text-orange-500":"text-gray-400"}`,children:"▼"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:d.body}}),(0,s.jsx)("div",{className:"mt-6 flex gap-2 flex-wrap",children:d.tags?.map(e=>(0,s.jsx)("span",{className:"bg-blue-50 text-blue-600 px-2 py-1 rounded text-sm",children:e.tagName},e.tagId))}),(0,s.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:["asked by ",(0,s.jsx)("span",{className:"text-blue-600",children:d.authorUsername})]})]})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:[c.length," Answers"]}),c.map(e=>(0,s.jsx)("div",{className:`bg-white rounded-lg shadow p-6 mb-4 ${e.isAccepted?"border-l-4 border-green-500":""}`,children:(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>j("up","answer",e.answerId),className:`p-2 rounded hover:bg-gray-100 ${"up"===e.userVoteType?"text-orange-500":"text-gray-400"}`,children:"▲"}),(0,s.jsx)("span",{className:"text-xl font-semibold",children:e.score}),(0,s.jsx)("button",{onClick:()=>j("down","answer",e.answerId),className:`p-2 rounded hover:bg-gray-100 ${"down"===e.userVoteType?"text-orange-500":"text-gray-400"}`,children:"▼"}),e.isAccepted&&(0,s.jsx)("span",{className:"text-green-500 text-2xl",children:"✓"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:e.body}}),(0,s.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:["answered by ",(0,s.jsx)("span",{className:"text-blue-600",children:e.authorUsername})]})]})]})},e.answerId))]}),o?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Answer"}),(0,s.jsxs)("form",{onSubmit:y,children:[(0,s.jsx)("textarea",{value:h,onChange:e=>g(e.target.value),rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",placeholder:"Write your answer here...",required:!0}),(0,s.jsx)("button",{type:"submit",disabled:p,className:"mt-4 bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 transition",children:p?"Posting...":"Post Your Answer"})]})]}):(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:(0,s.jsxs)("p",{className:"text-gray-600",children:[(0,s.jsx)(r.default,{href:"/login",className:"text-orange-500 hover:text-orange-600",children:"Log in"})," to post an answer"]})})]})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Question not found"}),(0,s.jsx)(r.default,{href:"/",className:"mt-4 inline-block text-orange-500 hover:text-orange-600",children:"← Back to home"})]})})}e.s(["default",()=>o])}]);