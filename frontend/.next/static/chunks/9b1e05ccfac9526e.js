(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96086,(e,s,a)=>{s.exports=e.r(9187)},45461,e=>{"use strict";var s=e.i(48277),a=e.i(30668),t=e.i(96086),l=e.i(23959),i=e.i(96800);function c(){let{user:e,isLoading:c}=(0,l.useAuth)(),n=(0,t.useRouter)(),[r,d]=(0,a.useState)([]),[m,o]=(0,a.useState)([]),[h,g]=(0,a.useState)([]),[x,u]=(0,a.useState)(!0),[b,N]=(0,a.useState)(""),[j,p]=(0,a.useState)("watched");(0,a.useEffect)(()=>{c||e?e&&f():n.push("/login")},[e,c,n]);let f=async()=>{try{let[e,s]=await Promise.all([i.default.get("/tags?pageSize=100"),i.default.get("/users/tag-preferences")]);d(e.data.items||[]),o(s.data.watched||[]),g(s.data.ignored||[])}catch(e){console.error("Failed to fetch tag preferences:",e),d([{tagId:1,tagName:"javascript",usageCount:1500},{tagId:2,tagName:"react",usageCount:1200},{tagId:3,tagName:"typescript",usageCount:800},{tagId:4,tagName:"node.js",usageCount:700},{tagId:5,tagName:"python",usageCount:600},{tagId:6,tagName:"csharp",usageCount:500},{tagId:7,tagName:"html",usageCount:450},{tagId:8,tagName:"css",usageCount:400}])}finally{u(!1)}},y=(e,s)=>{"watched"===s?m.includes(e)?o(m.filter(s=>s!==e)):(o([...m,e]),g(h.filter(s=>s!==e))):h.includes(e)?g(h.filter(s=>s!==e)):(g([...h,e]),o(m.filter(s=>s!==e)))},v=async()=>{try{await i.default.put("/users/tag-preferences",{watched:m,ignored:h})}catch(e){console.error("Failed to save preferences:",e)}},w=r.filter(e=>e.tagName.toLowerCase().includes(b.toLowerCase()));return c||x?(0,s.jsx)("div",{className:"container py-5 text-center",children:(0,s.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):e?(0,s.jsx)("div",{className:"container py-4",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-lg-8",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("h1",{className:"fw-bold mb-2",children:[(0,s.jsx)("i",{className:"bi bi-tags-fill me-2 text-primary"}),"Tag Preferences"]}),(0,s.jsx)("p",{className:"text-muted",children:"Customize your feed by watching tags you're interested in or ignoring tags you don't want to see."})]}),(0,s.jsxs)("ul",{className:"nav nav-tabs mb-4",children:[(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsxs)("button",{className:`nav-link ${"watched"===j?"active":""}`,onClick:()=>p("watched"),children:[(0,s.jsx)("i",{className:"bi bi-eye me-1 text-success"}),"Watched Tags (",m.length,")"]})}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsxs)("button",{className:`nav-link ${"ignored"===j?"active":""}`,onClick:()=>p("ignored"),children:[(0,s.jsx)("i",{className:"bi bi-eye-slash me-1 text-danger"}),"Ignored Tags (",h.length,")"]})})]}),(0,s.jsx)("div",{className:"card border-0 shadow-sm rounded-4 mb-4",children:(0,s.jsx)("div",{className:"card-body",children:"watched"===j?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"alert alert-success d-flex align-items-start mb-4",children:[(0,s.jsx)("i",{className:"bi bi-info-circle-fill me-2 mt-1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Watched Tags"}),(0,s.jsx)("p",{className:"mb-0 small",children:"Questions with these tags will be highlighted in your feed and you'll receive notifications for new questions."})]})]}),m.length>0?(0,s.jsx)("div",{className:"d-flex flex-wrap gap-2 mb-4",children:m.map(e=>(0,s.jsxs)("span",{className:"badge bg-success-subtle text-success d-flex align-items-center gap-1 px-3 py-2 rounded-pill",children:[(0,s.jsx)("i",{className:"bi bi-eye"}),e,(0,s.jsx)("button",{className:"btn-close btn-close-white ms-1",style:{fontSize:"0.5rem"},onClick:()=>y(e,"watched")})]},e))}):(0,s.jsx)("p",{className:"text-muted text-center py-3",children:"No watched tags yet. Add tags below to watch them."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"alert alert-danger d-flex align-items-start mb-4",children:[(0,s.jsx)("i",{className:"bi bi-info-circle-fill me-2 mt-1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Ignored Tags"}),(0,s.jsx)("p",{className:"mb-0 small",children:"Questions with these tags will be hidden from your feed."})]})]}),h.length>0?(0,s.jsx)("div",{className:"d-flex flex-wrap gap-2 mb-4",children:h.map(e=>(0,s.jsxs)("span",{className:"badge bg-danger-subtle text-danger d-flex align-items-center gap-1 px-3 py-2 rounded-pill",children:[(0,s.jsx)("i",{className:"bi bi-eye-slash"}),e,(0,s.jsx)("button",{className:"btn-close btn-close-white ms-1",style:{fontSize:"0.5rem"},onClick:()=>y(e,"ignored")})]},e))}):(0,s.jsx)("p",{className:"text-muted text-center py-3",children:"No ignored tags. Add tags below to ignore them."})]})})}),(0,s.jsxs)("div",{className:"card border-0 shadow-sm rounded-4",children:[(0,s.jsx)("div",{className:"card-header bg-white border-0 pt-4",children:(0,s.jsx)("h5",{className:"fw-bold mb-0",children:"Add Tags"})}),(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsxs)("div",{className:"input-group mb-4",children:[(0,s.jsx)("span",{className:"input-group-text bg-light border-end-0",children:(0,s.jsx)("i",{className:"bi bi-search"})}),(0,s.jsx)("input",{type:"text",className:"form-control border-start-0",placeholder:"Search tags...",value:b,onChange:e=>N(e.target.value)})]}),(0,s.jsx)("div",{className:"row g-2",children:w.map(e=>(0,s.jsx)("div",{className:"col-md-6 col-lg-4",children:(0,s.jsxs)("div",{className:"d-flex align-items-center justify-content-between p-2 border rounded-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"badge bg-primary-subtle text-primary me-2",children:e.tagName}),(0,s.jsxs)("small",{className:"text-muted",children:["Ã—",e.usageCount]})]}),(0,s.jsxs)("div",{className:"btn-group btn-group-sm",children:[(0,s.jsx)("button",{className:`btn ${m.includes(e.tagName)?"btn-success":"btn-outline-success"}`,onClick:()=>y(e.tagName,"watched"),title:"Watch",children:(0,s.jsx)("i",{className:"bi bi-eye"})}),(0,s.jsx)("button",{className:`btn ${h.includes(e.tagName)?"btn-danger":"btn-outline-danger"}`,onClick:()=>y(e.tagName,"ignored"),title:"Ignore",children:(0,s.jsx)("i",{className:"bi bi-eye-slash"})})]})]})},e.tagId))})]})]}),(0,s.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,s.jsxs)("button",{className:"btn btn-primary rounded-pill px-4",onClick:v,children:[(0,s.jsx)("i",{className:"bi bi-check-lg me-2"}),"Save Preferences"]})})]}),(0,s.jsx)("div",{className:"col-lg-4",children:(0,s.jsxs)("div",{className:"card border-0 shadow-sm rounded-4",children:[(0,s.jsx)("div",{className:"card-header bg-white border-0 pt-4",children:(0,s.jsxs)("h5",{className:"fw-bold mb-0",children:[(0,s.jsx)("i",{className:"bi bi-lightbulb me-2 text-warning"}),"Tips"]})}),(0,s.jsx)("div",{className:"card-body",children:(0,s.jsxs)("ul",{className:"list-unstyled mb-0",children:[(0,s.jsxs)("li",{className:"mb-3 d-flex",children:[(0,s.jsx)("i",{className:"bi bi-check-circle-fill text-success me-2 mt-1"}),(0,s.jsx)("span",{className:"small",children:"Watch tags you want to follow closely"})]}),(0,s.jsxs)("li",{className:"mb-3 d-flex",children:[(0,s.jsx)("i",{className:"bi bi-check-circle-fill text-success me-2 mt-1"}),(0,s.jsx)("span",{className:"small",children:"Ignore tags for topics you're not interested in"})]}),(0,s.jsxs)("li",{className:"mb-3 d-flex",children:[(0,s.jsx)("i",{className:"bi bi-check-circle-fill text-success me-2 mt-1"}),(0,s.jsx)("span",{className:"small",children:"Your preferences affect your homepage feed"})]}),(0,s.jsxs)("li",{className:"d-flex",children:[(0,s.jsx)("i",{className:"bi bi-info-circle-fill text-primary me-2 mt-1"}),(0,s.jsx)("span",{className:"small",children:"You can always change these later"})]})]})})]})})]})}):null}e.s(["default",()=>c])}]);