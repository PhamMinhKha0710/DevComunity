(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96086,(e,s,a)=>{s.exports=e.r(9187)},20230,e=>{"use strict";var s=e.i(48277),a=e.i(30668),l=e.i(96086),i=e.i(23959),r=e.i(96800);function c(){let{user:e,isLoading:c,logout:t}=(0,i.useAuth)(),o=(0,l.useRouter)(),[d,n]=(0,a.useState)("profile"),[m,h]=(0,a.useState)(!1),[u,b]=(0,a.useState)({type:"",text:""}),[x,p]=(0,a.useState)({displayName:"",email:"",bio:"",location:"",website:""}),[f,N]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,a.useEffect)(()=>{c||e?e&&p({displayName:e.displayName||"",email:e.email||"",bio:"",location:"",website:""}):o.push("/login")},[e,c,o]);let j=async e=>{e.preventDefault(),h(!0),b({type:"",text:""});try{await r.default.put("/users/profile",x),b({type:"success",text:"Profile updated successfully"})}catch(e){b({type:"error",text:e.response?.data?.message||"Failed to update profile"})}finally{h(!1)}},w=async e=>{if(e.preventDefault(),f.newPassword!==f.confirmPassword)return void b({type:"error",text:"Passwords do not match"});h(!0),b({type:"",text:""});try{await r.default.post("/auth/change-password",{currentPassword:f.currentPassword,newPassword:f.newPassword}),b({type:"success",text:"Password changed successfully"}),N({currentPassword:"",newPassword:"",confirmPassword:""})}catch(e){b({type:"error",text:e.response?.data?.message||"Failed to change password"})}finally{h(!1)}};return c?(0,s.jsx)("div",{className:"container py-5 text-center",children:(0,s.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):e?(0,s.jsx)("div",{className:"container py-4",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-lg-3 mb-4",children:(0,s.jsx)("div",{className:"card border-0 shadow-sm rounded-4",children:(0,s.jsxs)("div",{className:"card-body p-0",children:[(0,s.jsxs)("div",{className:"text-center p-4 border-bottom",children:[(0,s.jsx)("img",{src:e.profilePicture||"/images/default-avatar.png",className:"rounded-circle mb-3",width:"80",height:"80",alt:""}),(0,s.jsx)("h6",{className:"fw-bold mb-0",children:e.displayName||e.username}),(0,s.jsxs)("small",{className:"text-muted",children:["@",e.username]})]}),(0,s.jsxs)("div",{className:"list-group list-group-flush",children:[(0,s.jsxs)("button",{className:`list-group-item list-group-item-action ${"profile"===d?"active":""}`,onClick:()=>n("profile"),children:[(0,s.jsx)("i",{className:"bi bi-person me-2"}),"Profile"]}),(0,s.jsxs)("button",{className:`list-group-item list-group-item-action ${"account"===d?"active":""}`,onClick:()=>n("account"),children:[(0,s.jsx)("i",{className:"bi bi-shield-lock me-2"}),"Account & Security"]}),(0,s.jsxs)("button",{className:`list-group-item list-group-item-action ${"notifications"===d?"active":""}`,onClick:()=>n("notifications"),children:[(0,s.jsx)("i",{className:"bi bi-bell me-2"}),"Notifications"]}),(0,s.jsxs)("button",{className:`list-group-item list-group-item-action ${"preferences"===d?"active":""}`,onClick:()=>n("preferences"),children:[(0,s.jsx)("i",{className:"bi bi-sliders me-2"}),"Preferences"]})]})]})})}),(0,s.jsxs)("div",{className:"col-lg-9",children:[u.text&&(0,s.jsxs)("div",{className:`alert alert-${"success"===u.type?"success":"danger"} alert-dismissible fade show`,role:"alert",children:[(0,s.jsx)("i",{className:`bi bi-${"success"===u.type?"check-circle":"exclamation-circle"} me-2`}),u.text,(0,s.jsx)("button",{type:"button",className:"btn-close",onClick:()=>b({type:"",text:""})})]}),"profile"===d&&(0,s.jsxs)("div",{className:"card border-0 shadow-sm rounded-4",children:[(0,s.jsx)("div",{className:"card-header bg-white border-0 pt-4",children:(0,s.jsx)("h5",{className:"fw-bold mb-0",children:"Profile Settings"})}),(0,s.jsx)("div",{className:"card-body",children:(0,s.jsxs)("form",{onSubmit:j,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Display Name"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:x.displayName,onChange:e=>p({...x,displayName:e.target.value})})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"form-control",value:x.email,onChange:e=>p({...x,email:e.target.value})})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Bio"}),(0,s.jsx)("textarea",{className:"form-control",rows:3,value:x.bio,onChange:e=>p({...x,bio:e.target.value}),placeholder:"Tell us about yourself..."})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-md-6 mb-4",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Location"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:x.location,onChange:e=>p({...x,location:e.target.value}),placeholder:"City, Country"})]}),(0,s.jsxs)("div",{className:"col-md-6 mb-4",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Website"}),(0,s.jsx)("input",{type:"url",className:"form-control",value:x.website,onChange:e=>p({...x,website:e.target.value}),placeholder:"https://..."})]})]}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary rounded-pill px-4",disabled:m,children:m?"Saving...":"Save Changes"})]})})]}),"account"===d&&(0,s.jsxs)("div",{className:"card border-0 shadow-sm rounded-4",children:[(0,s.jsx)("div",{className:"card-header bg-white border-0 pt-4",children:(0,s.jsx)("h5",{className:"fw-bold mb-0",children:"Account & Security"})}),(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("h6",{className:"fw-semibold mb-3",children:"Change Password"}),(0,s.jsxs)("form",{onSubmit:w,children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Current Password"}),(0,s.jsx)("input",{type:"password",className:"form-control",value:f.currentPassword,onChange:e=>N({...f,currentPassword:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"New Password"}),(0,s.jsx)("input",{type:"password",className:"form-control",value:f.newPassword,onChange:e=>N({...f,newPassword:e.target.value}),minLength:6,required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"form-label",children:"Confirm New Password"}),(0,s.jsx)("input",{type:"password",className:"form-control",value:f.confirmPassword,onChange:e=>N({...f,confirmPassword:e.target.value}),required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary rounded-pill px-4",disabled:m,children:m?"Updating...":"Update Password"})]}),(0,s.jsx)("hr",{className:"my-4"}),(0,s.jsx)("h6",{className:"fw-semibold mb-3 text-danger",children:"Danger Zone"}),(0,s.jsxs)("button",{className:"btn btn-outline-danger rounded-pill",onClick:t,children:[(0,s.jsx)("i",{className:"bi bi-box-arrow-right me-2"}),"Sign Out"]})]})]}),"notifications"===d&&(0,s.jsxs)("div",{className:"card border-0 shadow-sm rounded-4",children:[(0,s.jsx)("div",{className:"card-header bg-white border-0 pt-4",children:(0,s.jsx)("h5",{className:"fw-bold mb-0",children:"Notification Settings"})}),(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsxs)("div",{className:"form-check form-switch mb-3",children:[(0,s.jsx)("input",{className:"form-check-input",type:"checkbox",id:"emailNotif",defaultChecked:!0}),(0,s.jsx)("label",{className:"form-check-label",htmlFor:"emailNotif",children:"Email notifications"})]}),(0,s.jsxs)("div",{className:"form-check form-switch mb-3",children:[(0,s.jsx)("input",{className:"form-check-input",type:"checkbox",id:"pushNotif",defaultChecked:!0}),(0,s.jsx)("label",{className:"form-check-label",htmlFor:"pushNotif",children:"Push notifications"})]}),(0,s.jsxs)("div",{className:"form-check form-switch mb-3",children:[(0,s.jsx)("input",{className:"form-check-input",type:"checkbox",id:"answerNotif",defaultChecked:!0}),(0,s.jsx)("label",{className:"form-check-label",htmlFor:"answerNotif",children:"Notify when someone answers my question"})]}),(0,s.jsxs)("div",{className:"form-check form-switch",children:[(0,s.jsx)("input",{className:"form-check-input",type:"checkbox",id:"mentionNotif",defaultChecked:!0}),(0,s.jsx)("label",{className:"form-check-label",htmlFor:"mentionNotif",children:"Notify when someone mentions me"})]})]})]}),"preferences"===d&&(0,s.jsxs)("div",{className:"card border-0 shadow-sm rounded-4",children:[(0,s.jsx)("div",{className:"card-header bg-white border-0 pt-4",children:(0,s.jsx)("h5",{className:"fw-bold mb-0",children:"Preferences"})}),(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Theme"}),(0,s.jsxs)("select",{className:"form-select",children:[(0,s.jsx)("option",{value:"light",children:"Light"}),(0,s.jsx)("option",{value:"dark",children:"Dark"}),(0,s.jsx)("option",{value:"system",children:"System"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"form-label fw-semibold",children:"Language"}),(0,s.jsxs)("select",{className:"form-select",children:[(0,s.jsx)("option",{value:"en",children:"English"}),(0,s.jsx)("option",{value:"vi",children:"Tiếng Việt"})]})]})]})]})]})]})}):null}e.s(["default",()=>c])}]);